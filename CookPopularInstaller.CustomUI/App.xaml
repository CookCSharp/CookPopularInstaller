<prism:PrismApplication x:Class="CookPopularInstaller.CustomUI.App"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:local="clr-namespace:CookPopularInstaller.CustomUI"
                        xmlns:p="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
                        xmlns:prism="http://prismlibrary.com/"
                        xmlns:ui="https://github.cookpopularui/2021/xaml">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/CookPopularUI.WPF;component/Themes/Colors/BaseColor.xaml" />
                <ResourceDictionary Source="pack://application:,,,/CookPopularUI.WPF;component/Themes/DefaultPopularColor.xaml" />
                <ResourceDictionary Source="/CookPopularInstaller.CustomUI;component/Assets/Themes/Default.xaml" />

                <!--<ResourceDictionary Source="pack://application:,,,/CookPopularUI.WPF;component/Themes/Colors/LightColor.xaml" />
                <ResourceDictionary Source="/CookPopularInstaller.CustomUI;component/Assets/Themes/Light.xaml" />-->

                <!--<ResourceDictionary Source="pack://application:,,,/CookPopularUI.WPF;component/Themes/Colors/DarkColor.xaml" />
                <ResourceDictionary Source="/CookPopularInstaller.CustomUI;component/Assets/Themes/Dark.xaml" />-->

                <ResourceDictionary Source="pack://application:,,,/CookPopularUI.WPF;component/Themes/DefaultPopularControl.xaml" />
                <ResourceDictionary Source="pack://application:,,,/CookPopularInstaller.CustomUI;component/Assets/Languages/zh-cn.xaml" />
                <!--<ResourceDictionary Source="pack://application:,,,/CookPopularInstaller.CustomUI;component/Assets/Languages/en-us.xaml" />-->
            </ResourceDictionary.MergedDictionaries>

            <Geometry x:Key="ToolsManagementGeometry" p:Freeze="true">M937.088 174.976l-69.184-83.648A72.32 72.32 0 0 0 810.688 64H213.312c-23.36 0-43.776 10.432-57.728 27.392L86.912 174.976A97.472 97.472 0 0 0 64 238.208v622.208C64 915.2 108.8 960 163.584 960h696.896C915.2 960 960 915.2 960 860.416V238.208c0-23.872-8.448-46.272-22.912-63.232zM512 787.712L236.288 512h172.288V374.144h206.784V512h172.288L512 787.712zM167.36 167.36l34.432-68.928h620.288l34.432 68.928H167.36z</Geometry>
            <Geometry x:Key="CookPopularInstallerGeometry" p:Freeze="true">M937.088 174.976l-69.184-83.648A72.32 72.32 0 0 0 810.688 64H213.312c-23.36 0-43.776 10.432-57.728 27.392L86.912 174.976A97.472 97.472 0 0 0 64 238.208v622.208C64 915.2 108.8 960 163.584 960h696.896C915.2 960 960 915.2 960 860.416V238.208c0-23.872-8.448-46.272-22.912-63.232zM512 787.712L236.288 512h172.288V374.144h206.784V512h172.288L512 787.712zM167.36 167.36l34.432-68.928h620.288l34.432 68.928H167.36z</Geometry>
            <Geometry x:Key="CompanyLogoGeometry" p:Freeze="true">M937.088 174.976l-69.184-83.648A72.32 72.32 0 0 0 810.688 64H213.312c-23.36 0-43.776 10.432-57.728 27.392L86.912 174.976A97.472 97.472 0 0 0 64 238.208v622.208C64 915.2 108.8 960 163.584 960h696.896C915.2 960 960 915.2 960 860.416V238.208c0-23.872-8.448-46.272-22.912-63.232zM512 787.712L236.288 512h172.288V374.144h206.784V512h172.288L512  787.712zM167.36 167.36l34.432-68.928h620.288l34.432 68.928H167.36z</Geometry>
            <Geometry x:Key="RepairGeometry" p:Freeze="true">M991.99466 867.519996V544.00131c0-6.079975-1.535994-12.095951-4.479982-17.471929a23.551904 23.551904 0 0 0-11.007955-9.535961 55.551774 55.551774 0 0 0-15.039939-3.967984 133.311458 133.311458 0 0 0-16.447933-1.023996H927.99492V199.49071c1.983992-4.351982 4.86398-9.471962 8.511965-15.487938a192.959216 192.959216 0 0 0 10.495958-19.967918c3.327986-7.35997 6.335974-14.207942 8.959963-20.479917A42.239828 42.239828 0 0 0 959.99479 128.003a131.359466 131.359466 0 0 0-4.479982-20.479917 475.454068 475.454068 0 0 0-10.047959-31.551872 2980.371892 2980.371892 0 0 0-11.519953-31.99987 355.646555 355.646555 0 0 1-7.42397-21.95191 36.479852 36.479852 0 0 0-12.031951-15.999935A30.015878 30.015878 0 0 0 895.99505 0.00352h-127.99948a35.199857 35.199857 0 0 0-19.007923 6.527973 29.43988 29.43988 0 0 0-11.519953 15.487938c-2.55999 7.519969-5.215979 15.039939-7.999967 22.463908-3.839984 10.591957-7.519969 21.279914-10.943956 31.99987-3.711985 11.327954-7.039971 21.823911-10.047959 31.551872-3.007988 9.599961-4.479982 16.319934-4.479982 19.967919 0 4.671981 1.279995 9.983959 4.031984 15.999935 2.623989 6.015976 5.759977 12.671949 9.471961 20.031919 5.951976 11.935952 12.127951 23.743904 18.495925 35.455856V512.00144h-17.023931c-5.663977 0-11.327954 0.319999-16.959931 1.023996-5.247979 0.639997-10.335958 2.143991-15.039939 4.479982a27.935887 27.935887 0 0 0-10.943955 9.471961A30.527876 30.527876 0 0 0 671.99596 544.00131v323.518686c0 21.631912 4.351982 41.983829 12.991947 60.991752a165.695327 165.695327 0 0 0 35.007858 49.983797A159.423352 159.423352 0 0 0 831.99531 1023.99936c21.311913 0 41.663831-4.159983 60.991752-12.479949a171.487303 171.487303 0 0 0 51.007793-33.535864 156.799363 156.799363 0 0 0 35.007858-49.471799A145.27941 145.27941 0 0 0 991.99466 867.519996zM863.99518 512.00144h-63.99974V192.00274a31.99987 31.99987 0 0 0-3.519986-14.527941l-25.983894-51.967789 20.479917-61.50375h82.047666l20.479917 61.43975-25.983894 52.031789A31.99987 31.99987 0 0 0 863.99518 192.00274v319.9987z m-127.99948 127.99948v-63.99974h191.99922v63.99974h-191.99922z m191.99922 63.99974v159.99935c0.319999 12.735948-2.239991 25.375897-7.48797 36.99185-5.02398 11.551953-12.159951 22.07991-20.991914 31.039874A96.191609 96.191609 0 0 1 831.99531 959.99962c-12.735948 0.319999-25.375897-2.239991-36.99185-7.48797A96.255609 96.255609 0 0 1 735.9957 864.00001v-159.99935h191.99922zM287.99752 34.691379A31.99987 31.99987 0 0 0 243.965699 4.9955 288.06283 288.06283 0 0 0 223.99778 530.113366V895.99988a127.99948 127.99948 0 1 0 255.99896 0V530.177366a287.99883 287.99883 0 0 0-19.967919-525.117867A31.99987 31.99987 0 0 0 415.997 34.755379V256.00248a63.99974 63.99974 0 1 1-127.99948 0V34.691379z m-159.99935 237.439035c0-76.159691 37.951846-143.359418 95.99961-183.935252v167.679319a127.99948 127.99948 0 1 0 255.99896 0v-167.679319a224.06309 224.06309 0 0 1-44.031821 391.614409 31.99987 31.99987 0 0 0-19.967919 29.631879V895.99988a63.99974 63.99974 0 1 1-127.99948 0V509.44145a31.99987 31.99987 0 0 0-19.967919-29.631879A224.06309 224.06309 0 0 1 127.99817 272.002415v0.127999z</Geometry>
            <Geometry x:Key="UninstallGeometry" p:Freeze="true">M864 192H704V128a64 64 0 0 0-64-64H384a64 64 0 0 0-64 64v64H160a32 32 0 0 0 0 64h704a32 32 0 0 0 0-64zM640 192H384V128h256zM800 320a32 32 0 0 0-32 32V896H256V352a32 32 0 0 0-64 0V896a64 64 0 0 0 64 64h512a64 64 0 0 0 64-64V352a32 32 0 0 0-32-32z M608 704a32 32 0 0 1-22.656-9.344l-192-192a32 32 0 0 1 45.312-45.312l192 192A32 32 0 0 1 608 704z M416 704a32 32 0 0 1-22.656-54.656l192-192a32 32 0 0 1 45.312 45.312l-192 192A32 32 0 0 1 416 704z</Geometry>
            <Geometry x:Key="ChangeGeometry" p:Freeze="true">M486.4 518.4l-6.4 38.4 38.4-12.8 294.4-294.4-25.6-25.6-300.8 294.4z m320-371.2l83.2 83.2c12.8 12.8 12.8 38.4 0 51.2l-326.4 320c-6.4 6.4-12.8 6.4-19.2 12.8l-115.2 32c-19.2 6.4-38.4-6.4-44.8-25.6v-19.2l32-115.2c0-6.4 6.4-12.8 6.4-12.8l326.4-326.4c19.2-19.2 44.8-19.2 57.6 0z m-320 25.6c19.2 0 38.4 19.2 38.4 38.4s-19.2 38.4-38.4 38.4H268.8c-19.2 0-38.4 19.2-38.4 38.4v492.8c0 19.2 19.2 38.4 38.4 38.4h454.4c19.2 0 38.4-19.2 38.4-38.4V550.4c0-19.2 19.2-38.4 38.4-38.4s32 12.8 32 32v230.4c0 64-51.2 115.2-115.2 115.2h-448c-64 0-115.2-51.2-115.2-115.2V281.6c0-64 51.2-115.2 115.2-115.2h217.6z</Geometry>

            <Style x:Key="WindowStyle" TargetType="{x:Type Window}">
                <Setter Property="ResizeMode" Value="CanMinimize" />
                <Setter Property="WindowStyle" Value="None" />
                <Setter Property="WindowChrome.WindowChrome">
                    <Setter.Value>
                        <WindowChrome CaptionHeight="30" GlassFrameThickness="{x:Static WindowChrome.GlassFrameCompleteThickness}" />
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsDetecting}" Value="True">
                        <Setter Property="Background" Value="Transparent" />
                    </DataTrigger>
                    <DataTrigger Binding="{Binding IsDetecting}" Value="False">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Window}">
                                    <AdornerDecorator CacheMode="{StaticResource DefaultBitmapCache}">
                                        <Border Background="Transparent" Padding="0">
                                            <Border Background="{DynamicResource DefaultBackgroundBrush}" CornerRadius="5" Effect="{StaticResource ShadowEffectDepth0}">
                                                <ui:SimpleGrid>
                                                    <ContentPresenter ClipToBounds="True" />
                                                    <DockPanel Height="30" VerticalAlignment="Top">
                                                        <StackPanel DockPanel.Dock="Left"
                                                                    Margin="10,0,0,0"
                                                                    VerticalAlignment="Center"
                                                                    Orientation="Horizontal">
                                                            <Image Width="16" Height="16"
                                                                   Source="{TemplateBinding Icon}"
                                                                   Stretch="Uniform" />
                                                            <TextBlock Text="{TemplateBinding Title}"
                                                                       Foreground="{StaticResource ControlForegroundBrush}"
                                                                       FontSize="13"
                                                                       Margin="6,0,0,0" />
                                                        </StackPanel>
                                                        <StackPanel HorizontalAlignment="Right"
                                                                    Orientation="Horizontal" UseLayoutRounding="True" WindowChrome.IsHitTestVisibleInChrome="True">
                                                            <Button Width="45"
                                                                    Foreground="{StaticResource ControlForegroundBrush}"
                                                                    ToolTip="{DynamicResource Minimize}"
                                                                    Command="{x:Static SystemCommands.MinimizeWindowCommand}"
                                                                    ui:FrameworkElementBaseAttached.CornerRadius="0"
                                                                    ui:FrameworkElementBaseAttached.IconGeometry="{StaticResource MinimizeGeometry}"
                                                                    ui:FrameworkElementBaseAttached.IconHeight="12" ui:FrameworkElementBaseAttached.IconWidth="12"
                                                                    Style="{StaticResource ButtonNoMouseOverTransparentIconStyle}" />
                                                            <Button Width="45"
                                                                    Foreground="{StaticResource ControlForegroundBrush}"
                                                                    ToolTip="{DynamicResource Close}"
                                                                    Command="{Binding CloseWindowCommand}"
                                                                    ui:FrameworkElementBaseAttached.CornerRadius="0"
                                                                    ui:FrameworkElementBaseAttached.IconGeometry="{StaticResource CloseGeometry}"
                                                                    ui:FrameworkElementBaseAttached.IconHeight="12" ui:FrameworkElementBaseAttached.IconWidth="12"
                                                                    Style="{StaticResource ButtonNoMouseOverTransparentIconStyle}" />
                                                        </StackPanel>
                                                    </DockPanel>
                                                </ui:SimpleGrid>
                                            </Border>
                                        </Border>
                                    </AdornerDecorator>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </Application.Resources>

</prism:PrismApplication>
